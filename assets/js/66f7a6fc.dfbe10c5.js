"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5154],{79732:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"Guide/Dependencies","title":"Dependencies","description":"Using Toasty\u2019s dependency system is optional, but highly recommended.","source":"@site/docs/Guide/Dependencies.md","sourceDirName":"Guide","slug":"/Guide/Dependencies","permalink":"/Toasty/docs/Guide/Dependencies","draft":false,"unlisted":false,"editUrl":"https://github.com/Its-a-bit-random/Toasty/edit/main/docs/Guide/Dependencies.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"defaultSidebar","previous":{"title":"Lifecycle","permalink":"/Toasty/docs/Guide/Lifecycle"},"next":{"title":"Networking","permalink":"/Toasty/docs/Guide/Networking"}}');var i=r(74848),s=r(28453);const c={sidebar_position:3},o="Dependencies",d={},l=[{value:"Defining Dependencies",id:"defining-dependencies",level:2}];function a(e){const n={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"dependencies",children:"Dependencies"})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Using Toasty\u2019s dependency system is optional, but highly recommended.",(0,i.jsx)(n.br,{}),"\n","It ensures your modules load in the correct order and can greatly improve project stability."]})}),"\n",(0,i.jsxs)(n.p,{children:["Assuming you decide to use the dependency system you should almost never use the ",(0,i.jsx)(n.code,{children:"OnInit"})," lifecycle because all singletons should be started in the correct order."]}),"\n",(0,i.jsxs)(n.p,{children:["In simple terms, lets say you have ",(0,i.jsx)(n.code,{children:"ServiceA"})," and ",(0,i.jsx)(n.code,{children:"ServiceB"}),". And ",(0,i.jsx)(n.code,{children:"ServiceB"})," needs to use a function from ",(0,i.jsx)(n.code,{children:"ServiceA"}),". Toasty will then go on to call ",(0,i.jsx)(n.code,{children:"OnInit"})," and ",(0,i.jsx)(n.code,{children:"OnStart"})," to all singletons however since ",(0,i.jsx)(n.code,{children:"ServiceB"})," depends on ",(0,i.jsx)(n.code,{children:"ServiceA"}),", Toasty will always call ",(0,i.jsx)(n.code,{children:"OnInit"})," on ",(0,i.jsx)(n.code,{children:"ServiceA"})," before ",(0,i.jsx)(n.code,{children:"ServiceB"}),". And same with ",(0,i.jsx)(n.code,{children:"OnStart"}),", it will call ",(0,i.jsx)(n.code,{children:"OnStart"})," on ",(0,i.jsx)(n.code,{children:"ServiceA"})," before ",(0,i.jsx)(n.code,{children:"ServiceB"})]}),"\n",(0,i.jsxs)(n.p,{children:["(Hopefully that is explained well ",":P",")"]}),"\n",(0,i.jsx)(n.h2,{id:"defining-dependencies",children:"Defining Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"With all that talk out of the way, how do we actually tell Toasty what our singletons depend on? It's very simple, have a look below:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- ServiceA.luau\r\nlocal Toasty = require(path.to.toasty)\r\n\r\nlocal ServiceA = {\r\n\tImplements = { "OnStart" }\r\n}\r\n\r\nfunction ServiceA:SayHello()\r\n\tprint("Hello from service a")\r\nend\r\n\r\nfunction ServiceA:OnStart()\r\n\tprint("ServiceA::OnStart")\r\nend\r\n\r\nToasty.Service(ServiceA)\r\nreturn ServiceA\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- ServiceB.luau\r\nlocal Toasty = require(path.to.toasty)\r\nlocal ServiceA = require(path.to.ServiceA)\r\n\r\nlocal ServiceB = {\r\n\tImplements = { "OnStart" },\r\n\tDependencies = { ServiceA }, -- Tell toasty that this service depends on ServiceA\r\n}\r\n\r\nfunction ServiceB:OnStart()\r\n\tprint("ServiceB::OnStart")\r\n\tServiceA:SayHello()\r\nend\r\n\r\nToasty.Service(ServiceB)\r\nreturn ServiceB\n'})}),"\n",(0,i.jsx)(n.p,{children:"If you ran this, you would see that the output would look something like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"ServiceA::OnStart\r\nServiceB::OnStart\r\nHello from service a\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Keep in mind that still, ",(0,i.jsx)(n.strong,{children:"all"})," ",(0,i.jsx)(n.code,{children:"OnInit"})," functions are called before any ",(0,i.jsx)(n.code,{children:"OnStart"})," functions are called!"]})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var t=r(96540);const i={},s=t.createContext(i);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);