"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4135],{95127:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Guide/Lifecycle","title":"Lifecycle","description":"In the example service given in the \\"Hello World\\" page you might have noticed a table called \\"Implements\\". By default Toasty comes with OnInit and OnStart, this is where Toasty becomes really powerful, you can create and implement your own lifecycle functions.","source":"@site/docs/Guide/Lifecycle.md","sourceDirName":"Guide","slug":"/Guide/Lifecycle","permalink":"/Toasty/docs/Guide/Lifecycle","draft":false,"unlisted":false,"editUrl":"https://github.com/Its-a-bit-random/Toasty/edit/main/docs/Guide/Lifecycle.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"defaultSidebar","previous":{"title":"Dependencies","permalink":"/Toasty/docs/Guide/Dependencies"},"next":{"title":"Networking","permalink":"/Toasty/docs/Guide/Networking"}}');var a=n(74848),i=n(28453);const c={sidebar_position:4},o="Lifecycle",s={},l=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"lifecycle",children:"Lifecycle"})}),"\n",(0,a.jsx)(t.p,{children:'In the example service given in the "Hello World" page you might have noticed a table called "Implements". By default Toasty comes with OnInit and OnStart, this is where Toasty becomes really powerful, you can create and implement your own lifecycle functions.'}),"\n",(0,a.jsx)(t.p,{children:"Lets create our own OnHeartbeat lifecycle and add it to our service from before."}),"\n",(0,a.jsx)(t.p,{children:"Firstly we need to create a new service for handling our lifecycle, note this doesn't have to be a service/controller nor does it need to be created straight away. Your lifecycle can be created however, wherever and whenever you like."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-lua",children:'-- Services/HeartbeatLifecycleService\r\nlocal RunService = game:GetService("RunService")\r\nlocal Toasty = require(path.to.Toasty)\r\n\r\nlocal HeartbeatLifecycleService = {\r\n\tImplements = { "OnStart" }\r\n}\r\n\r\nfunction HeartbeatLifecycleService:OnStart()\r\n\tlocal heartbeatLifecycle = Toasty.Lifecycle.Create("OnHeartbeat")\r\n\r\n\tRunService.Heartbeat:Connect(function(deltaTime)\r\n\t\theartbeatLifecycle:Dispatch(deltaTime)\r\n\tend)\r\nend\r\n\r\nreturn HeartbeatLifecycleService\n'})}),"\n",(0,a.jsxs)(t.p,{children:["When you create a lifecycle you pass a name, this is the name that you will pass into the ",(0,a.jsx)(t.code,{children:"Implements"})," table of singletons. Anything you pass into ",(0,a.jsx)(t.code,{children:":Dispatch()"})," will also be passed to every singleton."]}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsxs)(t.p,{children:["You can also pass a custom function when creating a lifecycle to customize how the lifecycle is dispatched. You can see the default function ",(0,a.jsx)(t.a,{href:"https://github.com/Its-a-bit-random/Toasty/blob/0a9ad5ab7a70f8db538e1934a247d8912b1a5688/Source/Core/LifecycleManager.luau#L6-L13",children:"here"}),". And you can also see OnInit and OnStart ",(0,a.jsx)(t.a,{href:"https://github.com/Its-a-bit-random/Toasty/blob/0a9ad5ab7a70f8db538e1934a247d8912b1a5688/Source/Bootstrap.luau#L37-L55",children:"here"})," since they also use custom handlers."]})}),"\n",(0,a.jsx)(t.p,{children:"Lets now add this to our HelloWorld service from before."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-lua",children:'-- Services/MyService.luau\r\nlocal MyFirstService = {\r\n\tImplements = { "OnStart", "OnHeartbeat" }; -- Add "OnHeartbeat" to our implements\r\n}\r\n\r\n--[[\r\n\tAdd in the function which gets called when the lifecycle\r\n\tis dispatched\r\n]]\r\nfunction MyFirstService:OnHeartbeat(deltaTime: number)\r\n\tprint("Heartbeat, dt =", deltaTime)\r\nend\r\n\r\nfunction MyFirstService:OnStart()\r\n\tprint("Hello World!")\r\nend\r\n\r\nreturn MyFirstService\n'})}),"\n",(0,a.jsx)(t.p,{children:"Running this you should see that your service prints the delta time each frame."}),"\n",(0,a.jsx)(t.p,{children:"As always you can refer to the API docs to learn more about the inner workings of Lifecycles."})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>o});var r=n(96540);const a={},i=r.createContext(a);function c(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);